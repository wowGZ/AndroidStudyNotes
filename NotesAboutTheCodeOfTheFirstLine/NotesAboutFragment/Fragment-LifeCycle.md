---
title: Fragment-LifeCycle
---
## 碎片的生命周期

和活动一样碎片也有自己生命周期，而且它的生命周期和活动的非常相像。

### 碎片的状态和回调

活动一共有四种状态，运行状态、暂停状态、停止状态和销毁状态。类似的碎片也会在其生命周期内经历几种状态，不过在细小的地方有些不同。

- 1、运行状态：
当一个碎片是可见的，并且它所关联的活动正处于运行状态的时候，该碎片也是处于运行状态。

- 2、暂停状态
当一个活动进入暂停状态的时候（由于另一个未占满屏幕的活动被添加到了栈顶），与它相关联的可见碎片就会进入到暂停状态。

- 3、停止状态
当一个活动进入停止状态时，与他相关联的碎片就会进入停止状态，或者通过调用FragmentTransaction的remove()、replace()方法将碎片从活动中移除，但是如果在事务提交之前调用addToBackStack()方法，这时的碎片也会进入到停止状态。总的来说，进入停止状态的碎片对于用户来说，是不可见的，而且可能被系统回收。

- 4、销毁状态
碎片总是依附于活动而存在的，因此当活动被销毁时，与它相关联的碎片就会进入销毁状态。或者通过调用FragmentTransaction的remove()、replace()方法将碎片从活动中移除，但是如果在事务提交之前调用addToBackStack()方法，这时的碎片也会进入到销毁状态。

几个回调方法：
1. onAttach():当碎片和活动建立关联的时候调用。
2. onCreateView():为碎片创建视图（加载布局的时候）调用。
3. onActivityCreated():确保与碎片相关联的活动一定已经创建完毕的时候调用。
4. onDestroyView():当与碎片关联的视图被移除的时候调用。
5. onDetach():当碎片和活动解除关系的时候调用。
